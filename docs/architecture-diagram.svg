<svg viewBox="0 0 800 650" xmlns="http://www.w3.org/2000/svg">
  <!-- Meteora DAMM V2 Pool -->
  <g>
    <rect x="150" y="20" width="500" height="80" rx="8" fill="#1e293b" stroke="#3b82f6" stroke-width="2"/>
    <text x="400" y="50" text-anchor="middle" fill="#f1f5f9" font-size="18" font-weight="bold">
      Meteora DAMM V2 Pool
    </text>
    <text x="400" y="75" text-anchor="middle" fill="#94a3b8" font-size="14">
      (Generates Quote-Only Fees)
    </text>
  </g>

  <!-- Arrow 1: Fee Accrual -->
  <g>
    <line x1="400" y1="100" x2="400" y2="140" stroke="#10b981" stroke-width="3" marker-end="url(#arrowhead-green)"/>
    <text x="450" y="125" fill="#10b981" font-size="13" font-weight="500">Fee Accrual</text>
  </g>

  <!-- Honorary LP Position -->
  <g>
    <rect x="150" y="140" width="500" height="80" rx="8" fill="#1e293b" stroke="#8b5cf6" stroke-width="2"/>
    <text x="400" y="170" text-anchor="middle" fill="#f1f5f9" font-size="18" font-weight="bold">
      Honorary LP Position (PDA-Owned)
    </text>
    <text x="400" y="195" text-anchor="middle" fill="#94a3b8" font-size="14">
      [Accumulates Quote Fees]
    </text>
  </g>

  <!-- Arrow 2: 24h Crank -->
  <g>
    <line x1="400" y1="220" x2="400" y2="260" stroke="#f59e0b" stroke-width="3" marker-end="url(#arrowhead-orange)"/>
    <text x="470" y="245" fill="#f59e0b" font-size="13" font-weight="500">24h Crank (Permissionless)</text>
  </g>

  <!-- Fee Distribution Smart Contract -->
  <g>
    <rect x="100" y="260" width="600" height="180" rx="8" fill="#1e293b" stroke="#6366f1" stroke-width="2"/>
    <text x="400" y="285" text-anchor="middle" fill="#f1f5f9" font-size="18" font-weight="bold">
      Fee Distribution Smart Contract
    </text>

    <!-- Streamflow Data Box -->
    <rect x="130" y="310" width="220" height="100" rx="6" fill="#0f172a" stroke="#10b981" stroke-width="2"/>
    <text x="240" y="340" text-anchor="middle" fill="#f1f5f9" font-size="15" font-weight="600">
      Streamflow Data
    </text>
    <text x="240" y="365" text-anchor="middle" fill="#94a3b8" font-size="13">
      (Locked Amounts)
    </text>
    <text x="240" y="385" text-anchor="middle" fill="#64748b" font-size="11">
      locked_i(t) / Y0
    </text>

    <!-- Arrow between boxes -->
    <line x1="350" y1="360" x2="440" y2="360" stroke="#3b82f6" stroke-width="2" marker-end="url(#arrowhead-blue)"/>

    <!-- Pro-Rata Calculation Box -->
    <rect x="450" y="310" width="220" height="100" rx="6" fill="#0f172a" stroke="#ec4899" stroke-width="2"/>
    <text x="560" y="340" text-anchor="middle" fill="#f1f5f9" font-size="15" font-weight="600">
      Pro-Rata Calculation
    </text>
    <text x="560" y="365" text-anchor="middle" fill="#94a3b8" font-size="13">
      (Based on Lock %)
    </text>
    <text x="560" y="385" text-anchor="middle" fill="#64748b" font-size="11">
      payout_i = allocation Ã— weight_i
    </text>
  </g>

  <!-- Arrow 3: Split to Investors and Creator -->
  <g>
    <line x1="250" y1="440" x2="250" y2="530" stroke="#10b981" stroke-width="3" marker-end="url(#arrowhead-green)"/>
    <line x1="550" y1="440" x2="550" y2="530" stroke="#f59e0b" stroke-width="3" marker-end="url(#arrowhead-orange)"/>
  </g>

  <!-- Investors Box -->
  <g>
    <rect x="80" y="530" width="340" height="80" rx="8" fill="#1e293b" stroke="#10b981" stroke-width="2"/>
    <text x="250" y="560" text-anchor="middle" fill="#f1f5f9" font-size="18" font-weight="bold">
      Investors
    </text>
    <text x="250" y="585" text-anchor="middle" fill="#10b981" font-size="14">
      (Pro-Rata Distribution)
    </text>
  </g>

  <!-- Creator Wallet Box -->
  <g>
    <rect x="480" y="530" width="240" height="80" rx="8" fill="#1e293b" stroke="#f59e0b" stroke-width="2"/>
    <text x="600" y="560" text-anchor="middle" fill="#f1f5f9" font-size="18" font-weight="bold">
      Creator Wallet
    </text>
    <text x="600" y="585" text-anchor="middle" fill="#f59e0b" font-size="14">
      (Remainder)
    </text>
  </g>

  <!-- Arrow markers -->
  <defs>
    <marker id="arrowhead-green" markerWidth="10" markerHeight="10" refX="9" refY="3" orient="auto">
      <polygon points="0 0, 10 3, 0 6" fill="#10b981" />
    </marker>
    <marker id="arrowhead-orange" markerWidth="10" markerHeight="10" refX="9" refY="3" orient="auto">
      <polygon points="0 0, 10 3, 0 6" fill="#f59e0b" />
    </marker>
    <marker id="arrowhead-blue" markerWidth="10" markerHeight="10" refX="9" refY="3" orient="auto">
      <polygon points="0 0, 10 3, 0 6" fill="#3b82f6" />
    </marker>
  </defs>
</svg>
